@import services.MenuService
@(products: List[models.Menu], billForm: Form[forms.CreateBillForm])(implicit request: play.api.mvc.RequestHeader)
@main("Speisekarte") {
    <h1>Willkommen zur Speisekarte</h1>

    @helper.form(action = routes.BillController.addToBill()) {

        <ul id="showMenuList" style="list-style: none">
            @if(request.session.get("user").isDefined) {
                @helper.select(billForm("CustomerID"), helper.options(List(request.session.get("user").get.toString)),
                    'hidden -> "hidden", '_label -> "", '_showConstraints -> false)
            } else {
                @helper.select(billForm("CustomerID"), helper.options(List("0")),
                    'hidden -> "hidden", '_label -> "", '_showConstraints -> false)
            }
            @for(s <- services.MenuService.listCategories) {
                <li>@helper.select(billForm(s), services.MenuService.addedToMenu.map(f => if(f.category.equals(s)) f.name else None).filterNot(_ == None).map(p => p.toString -> p.toString))
                    @helper.select(billForm(s + "größe"), services.MenuService.addedToMenu.map(f => if(f.category.equals(s)) f.unitOfMeasurement else None).filterNot(_ == None).distinct.map({
                        case "ml" => "0.5l" -> "0.5l"
                        case "cm" => "medium" -> "medium"
                        case _ => "" -> ""
                    }))
                @helper.inputText(billForm("Anzahl der " + s).copy(value = Some("0")), '_showConstraints -> false)</li>
            }
            <li><input id="showMenuButton" type="submit" value="Zum Warenkorb"/></li>
        </ul>
    }

    <ul id="pizzaSizeShowMenu" style="list-style: none;"> Pizzagrößen in cm
        <li>Medium = 27cm</li>
        <li>Large = 32cm</li>
        <li>XL = 36cm</li>
    </ul>
}